# Restate Rust SDK v0.9.0 Release Notes

## Highlights

- **MSRV raised to 1.90.0** — a downstream dependency silently raised its MSRV, which would cause build failures for users relying on our previously announced MSRV
- **`#[lazy_state]` handler attribute** — opt into lazy state loading on a per-handler basis

## Table of Contents

- [Breaking Changes](#breaking-changes)
- [New Features](#new-features)

## Breaking Changes

### Dependency bumps with user-facing API changes

Several dependencies have been bumped. Most are transparent, but the following affect user code:

#### `rand` 0.9 → 0.10

The `rand()` method on context types returns `&mut rand::prelude::StdRng`. In rand 0.10, the trait that provides convenience methods like `.random()` and `.random_range()` was renamed from `Rng` to `RngExt`. If you import this trait, update your code:

```diff
- use rand::Rng;
+ use rand::RngExt;
```

Additionally, the low-level trait `RngCore` (providing `next_u32()`, `next_u64()`, `fill_bytes()`) was renamed to `Rng`:

```diff
- use rand::RngCore;
+ use rand::Rng;
```

`StdRng` no longer implements `Clone`. If you were cloning the RNG returned by `ctx.rand()`, this is no longer possible.

#### Other dependency bumps (no user-facing changes)

The following dependencies were also bumped but require no changes to user code:

| Dependency | Old | New |
|---|---|---|
| `restate-sdk-shared-core` | `0.6.0` | `0.7.1` |
| `aws_lambda_events` | `0.16.1` | `1.0` |
| `lambda_runtime` | `0.14.2` | `1.0` |
| `typify` | `0.1.0` | `0.6` |
| `jsonptr` | `0.5.1` | `0.7` |
| `regress` | `0.10.3` | `0.10` |
| `bytes` | `1.10` | `1.11` |
| `http` | `1.3` | `1.4` |
| `hyper` | `1.6` | `1.8` |
| `tokio` | `1.44` | `1.49` |
| `uuid` | `1.16.0` | `1.20` |
| `schemars` | `1.0.0` | `1.2` |
| `reqwest` (dev) | `0.12` | `0.13` |
| `testcontainers` | `0.23.3` | `0.27` |

### MSRV raised to 1.90.0

The minimum supported Rust version (MSRV) has been raised from **1.85.0** to **1.90.0**.

This bump was necessary because a downstream dependency raised its own MSRV without announcing it. Without this change, users relying on our previously announced MSRV of 1.85.0 would encounter build failures. Any user building with a toolchain between 1.85.0 and 1.87.x is affected. Rather than pinning to an older version of the dependency, we chose to follow the ecosystem forward.

**Impact on Users:**
- Projects using a Rust toolchain older than 1.90.0 will fail to compile against this version of the SDK
- Your own crate's `edition` field does not need to change, but your installed Rust toolchain must be >= 1.90.0

**Migration Guidance:**

Update your Rust toolchain:

```bash
rustup update stable
```

Verify your version:

```bash
rustc --version  # Must be >= 1.90.0
```

## New Features

### `#[lazy_state]` handler attribute

You can now annotate individual handlers with `#[lazy_state]` to enable lazy state loading for that handler. When enabled, state is fetched on demand rather than eagerly loaded when the handler is invoked.

**Example:**

```rust
#[restate_sdk::object]
pub trait MyObject {
    #[lazy_state]
    async fn my_handler(name: String) -> Result<String, HandlerError>;
}
```

**Related Issues:**
- PR [#90](https://github.com/restatedev/sdk-rust/pull/90)
